(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={Form:"Form_Form__3yBIK",Input:"Form_Input__3YNu3",Button:"Form_Button__3Iluq"}},14:function(e,t,a){e.exports={ModalBackdrop:"Modal_ModalBackdrop__3Osm_"}},17:function(e,t,a){e.exports={Header:"Searchbar_Header__2W2Nl"}},51:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a(1),o=a.n(n),c=a(4),s=a.n(c),i=(a(26),a(5)),l=a(6),u=a(8),h=a(7),d=a(10);a(16);function m(e){var t=e.className,a=e.type,n=e.name,o=e.value,c=e.placeholder,s=e.onChange;return Object(r.jsx)("input",{className:t,type:a,name:n,value:o,placeholder:c,onChange:s,autoComplete:"off",autoFocus:!0})}function p(e){var t=e.className,a=e.type,n=e.children,o=e.onClick;return Object(r.jsx)("button",{className:t,type:a,onClick:o,children:n})}var j=a(11),g=a.n(j),b=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={value:""},e.handleInputChange=function(t){var a=t.currentTarget.value;e.setState({value:a.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.value;""!==a.trim()?(e.props.onSubmit(a),e.setState({value:""})):d.b.warning("\u0412\u044b \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u0432\u0435\u043b\u0438...")},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(r.jsxs)("form",{className:g.a.Form,id:"form",onSubmit:this.handleSubmit,children:[Object(r.jsx)(m,{className:g.a.Input,type:"text",name:"search",value:this.state.value,placeholder:"Search images and photos",onChange:this.handleInputChange}),Object(r.jsx)(p,{className:g.a.Button,type:"submit",children:"Search"})]})}}]),a}(n.Component),f=a(17),v=a.n(f);function y(e){var t=e.onSubmit;return Object(r.jsx)("header",{className:v.a.Header,children:Object(r.jsx)(b,{onSubmit:t})})}var O=a(15),x=a(18),_=a.n(x),C=a(13),S=a.n(C),I=a(20),k=a(19);a(50);function M(e){var t=e.item,a=t.id,n=t.webformatURL,o=t.largeImageURL;return Object(r.jsx)("li",{className:"ImageGalleryItem",children:Object(r.jsx)("img",{className:"ImageGalleryItem-image",src:n,alt:"",width:"100%","data-largeimg":o})},a)}var w=a(14),L=a.n(w),N=document.querySelector("#modal-root"),B=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleClickBackdrop=function(t){t.target===t.currentTarget&&e.props.onClose()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.children;return Object(c.createPortal)(Object(r.jsx)("div",{className:L.a.ModalBackdrop,onClick:this.handleClickBackdrop,children:Object(r.jsx)("div",{className:L.a.ModalContent,children:e})}),N)}}]),a}(n.Component);var F=a(9),G=a.n(F),U="idle",Q="pending",R="resolved",D="rejected",T=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={response:[],error:null,page:1,currentSearch:"",status:"idle",largeImageURL:""},e.onLoadMore=function(){var t=e.props.searchQuery,a=e.state.page;e.performerFetch(t,a)},e.onShowLargeImgModal=function(t){if("IMG"===t.target.nodeName){var a=t.target.getAttribute("data-largeimg");e.setState({largeImageURL:a})}},e.onCloseModal=function(){e.setState({largeImageURL:""})},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.props.searchQuery,r=this.state,n=r.page,o=r.status,c=r.error;o===D&&(d.b.error("".concat(c)),this.setState({status:U})),e.searchQuery!==this.props.searchQuery&&this.setState({currentSearch:a,response:[],page:1}),t.currentSearch!==this.state.currentSearch&&this.performerFetch(a,n)}},{key:"performerFetch",value:function(e,t){var a=this;this.setState({status:Q}),setTimeout((function(){(function(e,t,a){var r=new URLSearchParams({q:e,page:t,per_page:12,image_type:"photo",order:"popular"}),n="".concat("https://pixabay.com/api/","?key=").concat("19085277-779e4bd4c925c04676eaaf904","&").concat(r);return fetch(n).then((function(e){return e.json()})).then((function(e){return 0===e.hits.length?Promise.reject(new Error("\u041d\u0435\u043a\u043e\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u0430")):e.hits}))})(e,t).then((function(e){return a.setState((function(t){return{response:[].concat(Object(O.a)(t.response),Object(O.a)(e)),page:t.page+1,status:R}}))})).catch((function(e){return a.setState({error:e,status:D})}))}),500)}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.response,n=e.largeImageURL;return Object(r.jsxs)("div",{children:[Object(r.jsx)("ul",{className:G.a.ImageGallery,onClick:this.onShowLargeImgModal,children:t!==U&&Object(r.jsx)(C.ResponsiveMasonry,{columnsCountBreakPoints:{350:1,750:2},children:Object(r.jsx)(S.a,{gutter:"30px",children:a.map((function(e){return Object(r.jsx)(M,{item:e})}))})})}),t===R&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:G.a.LoarMoreBox,children:Object(r.jsx)(p,{className:G.a.LoadMore,type:"button",children:"Load More",onClick:this.onLoadMore})}),Object(r.jsx)("a",{href:"#form",className:G.a.ToBeginning,children:Object(r.jsx)(k.a,{size:"30px",color:"#ffffff"})})]}),t===Q&&Object(r.jsx)(B,{children:Object(r.jsx)(_.a,{className:G.a.Loader,type:"Hearts",color:"#00BFFF",height:80,width:80})}),""!==n&&Object(r.jsxs)(B,{onClose:this.onCloseModal,children:[Object(r.jsx)("img",{src:n}),Object(r.jsx)(p,{className:G.a.CloseModal,type:"button",onClick:this.onCloseModal,children:Object(r.jsx)(I.a,{size:"30px",color:"#ffffff"})})]})]})}}]),a}(n.Component),A=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.handleFormSubmit=function(t){e.setState({searchQuery:t,page:1})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.searchQuery;e.page;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y,{onSubmit:this.handleFormSubmit}),Object(r.jsx)(T,{searchQuery:t}),Object(r.jsx)(d.a,{position:"top-right",autoClose:2500})]})}}]),a}(n.Component);s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(A,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__1PujA",Loader:"ImageGallery_Loader__3xV_M",CloseModal:"ImageGallery_CloseModal__3Yljt",ToBeginning:"ImageGallery_ToBeginning__2P262",LoarMoreBox:"ImageGallery_LoarMoreBox__6gT9p",LoadMore:"ImageGallery_LoadMore__17ZDp"}}},[[51,1,2]]]);
//# sourceMappingURL=main.a5873173.chunk.js.map